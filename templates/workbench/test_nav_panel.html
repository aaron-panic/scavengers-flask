{% extends "base.html" %}
{% import "components/panel.html" as Panel %}

{% block content %}
<h1>Navigation Panel Test</h1>

{# Construct Tabs Object #}
{% set tabs = [] %}
{% for item in mock.family.navigation %}
    {% set is_active = (item.slug == active_slug) %}
    {% set _ = tabs.append({
        'label': item.label,
        'href': '?slug=' + item.slug,
        'active': is_active
    }) %}
{% endfor %}

{% set active_item = mock.family.navigation | selectattr('slug', 'equalto', active_slug) | first %}

{% call Panel.render(
    type='tabbed',
    header={'title': active_item.title},
    tabs=tabs
) %}
    <p>{{ active_item.content }}</p>
{% endcall %}

{% endblock %}