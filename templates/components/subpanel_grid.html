{% import "components/subpanel.html" as Subpanel %}

{% macro render(items, pagination=None, active_filter=None, all_tags=[]) %}
<div class="subpanel-grid-wrapper">
    
    <div class="subpanel-grid">
        {% for item in items %}
            {{ Subpanel.render(item) }}
        {% endfor %}
    </div>

    <footer class="grid-toolbar">
        <nav aria-label="Grid Controls">
            
            <div class="pagination-controls">
                 {% if pagination %}
                <a href="?tab=browse&page={{ pagination.prev_num }}" class="control {{ 'disabled' if not pagination.has_prev else '' }}">&larr; Prev</a>
                <span class="status">Page {{ pagination.page }} of {{ pagination.pages }}</span>
                <a href="?tab=browse&page={{ pagination.next_num }}" class="control {{ 'disabled' if not pagination.has_next else '' }}">Next &rarr;</a>
                {% endif %}
            </div>

            <div class="filter-controls">
                <span class="label">Filter:</span>
                <a href="?tab=browse" class="filter-tag {{ 'active' if not active_filter else '' }}">All</a>
                {% for tag in all_tags %}
                <a href="?tab=browse&tag={{ tag }}" class="filter-tag {{ 'active' if active_filter == tag else '' }}">
                    #{{ tag }}
                </a>
                {% endfor %}
            </div>

        </nav>
    </footer>
</div>
{% endmacro %}